**Release notes**

v0.9.17 (August 17, 2022)

- License change to Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International license [(CC BY-NC-ND 4.0)](https://creativecommons.org/licenses/by-nc-nd/4.0/) 
- P1P2Serial, P1P2Monitor, P1P2Serial: software-oscilloscope timing info ("U1"/"U0") added, available via R topic (outputmode 0x1000)
- P1P2Serial: rare read error in spike suppression bug fixed (OLDP1P2LIB)
- P1P2Serial: incorrect read-back-verification error report fixed (OLDP1P2LIB en NEWP1P2LIB/16MHz)

v0.9.16 (August 11, 2022)

- P1P2Serial: #define S_TIMER switch to make TIMER0 use (for uptime_sec) optional
- P1P2Monitor: change upt\* from uint32_t to int32_t to catch uptime_sec returning -1

v0.9.15 (August 8, 2022)

- P1P2Serial: all LEDs on until P1/P2 bus traffic
- P1P2Monitor: extended verbosity command output with compile date/time
- P1P2-bridge-esp8266 (still end-of-life): extended verbosity command output with compile date/time, OTA hostname unique, few minor fixes

v0.9.14 (August 2, 2022)

- P1P2Serial: major rewrite of library, send and receive methodology spreads CPU load better over time, allowing 8MHz operation on ATmega328P. Old library version still available as fall-back (#define OLDP1P2LIB),
- P1P2Monitor: program supports generic parameter writing ('E' command) to packet types 0x35-0x3D. Other improvements include error and write throttling, error counters, EEPROM state maintenance, self-reset command, and communication via pseudo-packets: packets that look like P1/P2 packets, but which carry information generated by P1P2Monitor, and which just like real packets generate json/MQTT parameter packets and homeassistant MQTT discovery packets. Json/mqtt support has been removed from the ATmega code as it doesn't fit: it is better handled on a separate CPU (such as the ESP8266),
- P1P2-bridge-esp8266: code has been extended with lots of improvements: telnet, schedule decoding, field setting decoding, boot process analysis, self-reset and ATmega-reset, ATmega-AVRISP, improved OTA, binary output over MQTT, configurable output modes ('J' command), configurable output filter ('S' command), home assistant MQTT discovery, state maintenance in flash and more. P1P2-bridge-esp8266 is becoming too big for an ESP8266 (schedule decoding is disabled for that reason). This is the last version of P1P2-bridge-esp8266, please don't use it for further develoment. It will be replaced by P1P2MQTT.
- P1P2MQTT: will replace P1P2-bridge-esp8266, work-in-progress, waiting for release

v0.9.13

- P1P2Monitor: no longer using millis(), reducing blocking due to serial input, correcting 'Z' handling to hexadecimal, and more

v0.9.12

- P1P2Monitor: Parameter support for F036 parameters
- P1P2serial: various minor bug fixes

v0.9.11

- P1P2Serial library: suppress end-of-block detection in case of short pauses between bytes in a package (for Zennio's KLIC-DA)
- P1P2Monitor: extended counter request functionality for KLIC-DA

v0.9.10

- P1P2Serial library: upon bus collision detection, write buffer is emptied

v0.9.9

- P1P2Monitor: autodetection of external controller slave address (thanks to the sugestion of Krakra)
- P1P2Monitor: reduced bus collision situations
- P1P2Serial library: added writeready() function

v0.9.8

- [+20190911] amended savehistory to include coverage for packet type 16; added P1P2Convert for Linux/RPi postprocessing of logs
- Added hysteresis functionality in temperature reporting
- Errors returned in errorbuf by readpacket() on longer contain EOB flag, only real error flags

v0.9.7

- Fixed hang/hick-up bug (switch from TIMER0 to TIMER2)
- Improved reliability of serial input to P1P2Monitor
- Ignore packets if CRC error detected
- Misc improvements
- Added counter request functionality to P1P2Monitor
- Rewrote release note format

v0.9.6

- !! P1P2Monitor has limited control functionality to switch DHW on/off and heating/cooling on/off. Tested on 2 products only.
- json functionality merged into P1P2Monitor
- udp functionality added to P1P2Monitor
- P1P2-bridge-esp8266 savehistory functionality expanded for F035 messages
- P1P2-bridge-esp8266 jsonstring buffer overflow handling improved
- Reduced Serialprint clutter from ESP via P1P2Monitor to Mqtt
- Added packetavailable() to avoid blocking in readpacket()
- Added documentation for x0Fx3x messages and external controller description
- Changed byte counter in documentation: now byte counting in packet starts at 0 to match C coding convention
- Moved generic protocol documentation to doc/README.md

v0.9.5 

- Changed delay behaviour and added delay timeout parameter 
- minor bug fixed in reporting bytes to be written (missing leading zero for hex values 0A..0F)

v0.9.4

- Added documentation and improved README.
- The combined functions in P1P2Monitor turned out to be too much for an Arduino Uno, leading to memory shortage and/or instability - use separate example applications per function
- new header files for LCD and json/mqtt conversion functions
- Library clean up, deleted unused functions, deleted relation to Stream
- several bug fixes
- improved ms counter, and reset of prescaler added
- time measurement changed
- delta/error reporting separated
- return value of readpacket changed from #bytes stored to #bytes received
- increased RX_BUFFER_SIZE to reduce risk of receiving buffer overruns

v0.9.3

- changed error handling
- corrected deltabuf type in readpacket

v0.9.2

- added setEcho()
- added readpacket(), writepacket()

v0.9.1

- added setDelay()

v0.9.0

- improved reading, writing, meta-data
- added support for timed writings
- added collission detection
- added stand-alon hardware debug mode
