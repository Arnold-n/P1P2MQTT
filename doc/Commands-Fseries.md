# Commands for Daikin VRV/Sky Air/F-series systems

As of v0.9.46, Home Assistant can generate various commands to control your F-series Daikin system, if the correct Daikin model is selected in the bridge. The system can be put into control mode ("L1") via Home Assistant. Based on the P1/P2 traffic, the P1P2MQTT bridge may provide a suggestion for the model type to be used. The model can be selected using the 'M' command or via Home Assistant.

If you want to issue your own instructions, this documents explains how to do so for various Daikin F-series models.

## Introduction

Some of the Daikin F-series models communicate systems parameters between the main controller and auxiliary controller in packet types 30-3F.

Daikin seems to identify its models by "major version" or "major design (change/category)" by the first letter after the capacity identifer: for example FDY125LV1 is major version L, FXMQ200PWM is major version P. The major version determines the protocol data format, and so far we identified three "families" of major versions.

## F Command format

The detailed info below is only if you are not using Home Assistant or want to understand the 'E' command operation. Some of these parameters may be different for different systems and/or different operation modes of the system. The best way to learn which parameter you need to set it so change a setting manually on the main controller while P1P2Monitor acts as auxiliary controller and data is logged via P1P2/R/#.  The main controller will then inform the P1P2Monitor of the new settings which you can then try to write to. Even better is to have another auxiliary controller write parameters and have P1P2Monitor eavesdrop the communication.

Some of these parameters can be changed, one at a time, by P1P2Monitor - when acting as an auxiliary controller (L1 mode) - using the P1P2Monitor command 'F'. In a future release these commands will be automatically generated by the ESP interacting with Home Assistant.

The F command format is
`F <packet-type> <payload-index> <new-value>`
with packet-type and new-value hexadecimal, and payload-index in decimal format. If you hate spaces, you may concatenate these using a 2-char packet-type and 2-byte parameter number: `F38 0 1` is equivelant to `F380001`.

Multiple commands can be given in one line with `F <packet-type1> <parameter-number1> <new-value1>  <packet-type2> <parameter-number2> <new-value2>`.

Please pause for a few seconds between commands as commands are not yet buffered.

Some example parameters and commands (these may or may not work on other models) are given below. As an example, the first command in each table shows how to change payload byte 0 in packet type 38 or 3B for switching cooling/heating off.

Most interesting are packet type 38 (for major versions A, B, C, L, LA, P, PA) or packet type 3B (for major version M), as these are used to control the system.

## For major version B, C, L, for example FBQ-B, ADEQ-B2VEB, FBQ-C7VEB, FDY-LV1, perhaps FBQ-B7V1

The commands are the same as for major version L, P, A, even though the protocol data format is slightly different.

## For major version LA, P, PA, A, for example FXMQ-PAVE, FXMQ-PWM, FDYQN-LAV1, perhaps FBA-A9

As an example, payload byte 0 in packet type 38 is used for switching cooling/heating off.

| Command  | Description                                        |
|:---------|:-----------------------------------------------
| `F 38 0 1`   | to switch on
| `F380001`    | to switch on (alternative without spaces)
| `F 38 0 0`   | to switch off
| `F 38 1 61`  | to set heating mode
| `F 38 1 62`  | to set cooling mode
| `F 38 1 63`  | to set auto mode
| `F 38 1 67`  | to set dry mode
| `F 38 1 60`  | to set fan-only mode
| `F 38 2 17`  | to set the setpoint to 0x17 = 23C (cooling mode)
| `F 38 2 19`  | to set the setpoint to 0x19 = 25C
| `F 38 4 11`  | to set the fanmode to low         (cooling mode)
| `F 38 4 31`  | to set the fanmode to medium
| `F 38 4 51`  | to set the fanmode to high
| `F 38 6 17`  | to set the setpoint to 0x17 = 23C (heating mode)
| `F 38 6 19`  | to set the setpoint to 0x19 = 25C
| `F 38 8 11`  | to set the fanmode to low         (heating mode)
| `F 38 8 31`  | to set the fanmode to medium
| `F 38 8 51`  | to set the fanmode to high

## For major version M, for example FDYQ-MV, possibly others

As an example, payload byte 0 in packet type 3B is used for switching cooling/heating off.

| Command  | Description                                        |
|:---------|:-----------------------------------------------
| `F 3B 0 1`   | to switch on
| `F3B0001`    | to switch on (alternative without spaces)
| `F 3B 0 0`   | to switch off
| `F 3B 1 61`  | to set heating mode
| `F 3B 1 62`  | to set cooling mode
| `F 3B 1 63`  | to set auto mode
| `F 3B 1 67`  | to set dry mode
| `F 3B 1 60`  | to set fan-only mode
| `F 3B 2 17`  | to set the setpoint to 0x17 = 23C (cooling mode)
| `F 3B 2 19`  | to set the setpoint to 0x19 = 25C
| `F 3B 4 11`  | to set the fanmode to low         (cooling mode)
| `F 3B 4 31`  | to set the fanmode to medium
| `F 3B 4 51`  | to set the fanmode to hig
| `F 3B 6 17`  | to set the setpoint to 0x17 = 23C (heating mode)
| `F 3B 6 19`  | to set the setpoint to 0x19 = 25C
| `F 3B 8 11`  | to set the fanmode to low         (heating mode)
| `F 3B 8 31`  | to set the fanmode to medium
| `F 3B 8 51`  | to set the fanmode to high
| `F 3B 16 ??` | (not sure yet, active hvac zones related)
| `F 3B 17 ??` | (not sure yet, target fan mode related)
